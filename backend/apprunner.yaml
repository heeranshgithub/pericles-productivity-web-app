version: 1.0
runtime: nodejs22
build:
  commands:
    pre-build:
      - npm ci --include=dev
    build:
      - npm run build
run:
  runtime-version: 22.21.1  # ‚Üê Use exact version from AWS docs
  command: node dist/main
  network:
    port: 5000
  env:
    # Application
    - name: NODE_ENV
      value: production

    # AWS Configuration (for Secrets Manager)
    - name: AWS_REGION
      value: ap-south-1

    # Backend Configuration
    - name: PORT
      value: '5000'
    - name: DB_NAME
      value: pericles
    - name: JWT_EXPIRATION
      value: 7d
    - name: API_V1_PREFIX
      value: ''
    - name: SALT_ROUNDS
      value: '10'
    - name: FRONTEND_URL
      value: 'https://your-frontend-url.com'  # TODO: Update with actual frontend URL